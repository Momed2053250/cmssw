=== Compile & Run Instructions ===

```
cmsrel CMSSW_15_0_0_pre2
cd CMSSW_15_0_0_pre2/src
cmsenv
git cms-checkout-topic -u P2-Tracker-BES-SW:unpackers_15_0_0_pre2
scram b -j
cd EventFilter/Phase2TrackerRawToDigi/test/
# Run cluster --> RAW --> cluster sequence for Outer Tracker.
cmsRun SLinkProducerAndUnpacker_cfg.py*
```

=== Rebase Instructions ===

If you have a personal branch of this code, and wish to update it with changes made by others to tomalin:masterP2TrackerUnpackers , then in new project area:

```
git cms-checkout-topic -u P2-Tracker-BES-SW:unpackers_15_0_0_pre2
git cms-rebase-topic -u myFork:myBranch
```

=== DTHDAQToFEDRawDataConverter Instructions ===

DTHDAQToFEDRawDataConverter.cc plugin reads `.raw` files generated by the TIF, the .raw files are in DTH DAQ bitstream, the plugin converts the fragments to FEDRawDataCollections.

The plugin code is in [../plugins/DTHDAQToFEDRawDataConverter.cc](https://github.com/P2-Tracker-BES-SW/cmssw/blob/AAA_unpacker/EventFilter/Phase2TrackerRawToDigi/plugins/DTHDAQToFEDRawDataConverter.cc)


[DTHDAQtoFEDRAWData_cfg.py](https://github.com/P2-Tracker-BES-SW/cmssw/blob/AAA_unpacker/EventFilter/Phase2TrackerRawToDigi/test/DTHDAQtoFEDRAWData_cfg.py) is the configuration file. 

To run the code: `cmsRun DTHDAQtoFEDRAWData_cfg.py`

This code makes no assumptions about the number of orbits in the raw file or the fragment sizes (such as the number of events per orbit or whether fragments are uniform in size). It reads the entire file—regardless of how many orbits it contains—and uses the information in each orbit header (orbit size and fragment count) along with each fragment trailer (fragment size) to dynamically process the data.

Here is an example raw input file you can download from
https://github.com/smorovic/cmssw/blob/dev-dth-byte-order-commit-3/EventFilter/Utilities/test/run000018_ls0001_index000000.raw (check that you downlaod the .raw binary file and not html)

Alternatively, you can make your own raw input file:
```
cmsRun startBU.py runNumber=100101 fffBaseDir=myOutputDir maxLS=2 fedMeanSize=128
eventsPerFile=2 eventsPerLS=3 frdFileVersion=0 dataType=DTH
```
